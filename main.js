!function(){"use strict";class t{constructor(t,e,s){let{name:n,link:i}=t;this._name=n,this._link=i,this._cardSelector=s,this._handleImageClick=e,this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like-button"),this._cardImage=this._element.querySelector(".card__image"),this._trashButton=this._element.querySelector(".card__trash-button"),this._setEventListeners()}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLike),this._trashButton.addEventListener("click",(()=>this._deleteCard())),this._cardImage.addEventListener("click",(()=>this._handleImageClick({link:this._link,name:this._name})))}_handleLike=()=>{this._likeButton.classList.toggle("card__like-button_active")};_deleteCard(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardImage.src=this._link,this._cardImage.alt=`Photo of ${this._name}`,this._element.querySelector(".card__title").textContent=this._name,this._element}}class e{constructor(t){let{popupSelector:e}=t;this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(t=>{t.target===t.currentTarget&&this.close()})),this._closeButton.addEventListener("click",(()=>this.close()))}}class s extends e{constructor(t,e){super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._formInputs=this._popupForm.querySelectorAll("input"),this._handleFormSubmit=e}_getInputValues(){const t={};return this._formInputs.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()}))}}const n=[{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"},{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"}];class i{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e,this._inputList=this._form.querySelectorAll(this._inputSelector),console.log(this._inputList),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleInputState(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_checkValidity(t){return!t.validity.valid}_hasInvalidInput=()=>Array.from(this._inputList).some(this._checkValidity);_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this.disableButton(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._toggleInputState(t),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}}const o=document.querySelector(".profile__button"),r=document.querySelector("#profile-title-input"),a=document.querySelector("#profile-subtitle-input"),l=document.querySelector(".profile__card-button"),u=document.forms.formAddCard,c=document.forms.profileForm,_={};var m;m={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input-error",errorClass:"modal__input-error_visible",modalSelector:".modal__form"},Array.from(document.querySelectorAll(m.modalSelector)).forEach((t=>{const e=new i(m,t),s=t.getAttribute("name");_[s]=e,e.enableValidation()}));const d=new class extends e{constructor(t){super({popupSelector:t}),this._image=this._popupElement.querySelector(".preview__image"),this._caption=this._popupElement.querySelector(".preview__caption"),super.setEventListeners()}open(t){this._caption.textContent=t.name,this._image.src=t.link,this._image.alt=`image ${t.name}`,super.open()}}("#preview_image");function h(e){return new t(e,(t=>{d.open(t)}),"#card-template").getView()}const p=new class{constructor(t,e){let{items:s,renderer:n}=t;this._items=s,this._renderer=n,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:n,renderer:t=>{const e=h(t);p.addItem(e)}},".cards__list");p.renderItems(n);const g=new s("#modalAddCard",(t=>{const e=h(t);g.close(),p.addItem(e),_[u.getAttribute("name")].disableButton()}));l.addEventListener("click",(()=>{g.open()})),g.setEventListeners();const v=new class{constructor(t,e){this._name=document.querySelector(t),this._subtitle=document.querySelector(e)}getUserInfo(){return{name:this._name.textContent,subtitle:this._subtitle.textContent}}setUserInfo(t,e){this._name.textContent=t,this._subtitle.textContent=e}}(".profile__title",".profile__subtitle"),E=new s("#modalEdit",(t=>{let{name:e,subtitle:s}=t;v.setUserInfo(e,s),E.close()}));o.addEventListener("click",(()=>{!function(){const t=v.getUserInfo();r.value=t.name,a.value=t.subtitle,E.open()}(),_[c.getAttribute("name")],_[c.getAttribute("name")].resetValidation()})),E.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UW9GLEVBQVl6SSxLQUNwQ2lHLEVBQW1CNUMsTUFBUW9GLEVBQVlILFNBQ3ZDRSxFQUFhekcsTUFDZixDQVVFMkcsR0FOQXBDLEVBQWNELEVBQVlNLGFBQWEsU0FDdkNMLEVBQWNELEVBQVlNLGFBQWEsU0FBU2IsaUJBTW5DLElBSWYwQyxFQUFhbEcsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnRhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGhhbmRsZUltYWdlQ2xpY2ssIGNhcmRTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7IC8vIEluaXRpYWxpemUgX2VsZW1lbnQgb25jZVxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTsgLy8gSW5pdGlhbGl6ZSBfbGlrZUJ1dHRvbiBvbmNlXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7IC8vIEluaXRpYWxpemUgX2NhcmRJbWFnZSBvbmNlXHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIik7IC8vIEluaXRpYWxpemUgX3RyYXNoQnV0dG9uIG9uY2VcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyAvLyBDYWxsIF9zZXRFdmVudExpc3RlbmVycyBvbmNlXHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlKTtcclxuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9kZWxldGVDYXJkKCkpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbGluazogdGhpcy5fbGluaywgbmFtZTogdGhpcy5fbmFtZSB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIF9kZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gYFBob3RvIG9mICR7dGhpcy5fbmFtZX1gO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIENsb3NlIHRoZSBwb3B1cCB3aGVuIHVzZXJzIGNsaWNrIG9uIHRoZSBzaGFkZWQgYXJlYSBvdXRzaWRlIHRoZSBtb2RhbFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgLy8gQ29sbGVjdHMgZGF0YSBmcm9tIGFsbCB0aGUgaW5wdXQgZmllbGRzIGFuZCByZXR1cm5zIHRoZSBkYXRhIGFzIGFuIG9iamVjdFxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIC8vIE1ha2UgYSBpbnB1dCBkYXRhIG9iamVjdFxyXG4gICAgY29uc3QgaW5wdXRPYmplY3QgPSB7fTtcclxuICAgIC8vIE5hbWUgZWFjaCBpbnB1dCBieSBpdHMgdmFsdWVcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRPYmplY3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgLy8gUmV0dXJuIHRoZSBkYXRhIGFzIGFuIG9iamVjdFxyXG4gICAgcmV0dXJuIGlucHV0T2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBBZGQgdGhlICdjbGljaycgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGNsb3NlIGljb25cclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSAnc3VibWl0JyBldmVudCBoYW5kbGVyIHRvIHRoZSBmb3JtXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybVNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICBtb2RhbEFkZENhcmQ6IFwiI21vZGFsQWRkQ2FyZFwiLFxyXG4gIG1vZGFsUHJvZmlsZTogXCIjbW9kYWxFZGl0XCIsXHJcbiAgcHJvZmlsZUZvcm06IFwiI2VkaXRfX3Byb2ZpbGVfX2Zvcm1cIixcclxuICBtb2RhbEltYWdlOiBcIiNwcmV2aWV3X2ltYWdlXCIsXHJcbiAgaW1hZ2VNb2RhbENvbnRhaW5lcjogXCIucHJldmlld19fY29udGFpbmVyXCIsXHJcbiAgaW1hZ2VzOiBcIi5jYXJkXCIsXHJcbiAgY2FyZExpc3Q6IFwiLmNhcmRzX19saXN0XCIsXHJcbiAgcHJvZmlsZU5hbWU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgcHJvZmlsZVN1YnRpdGxlOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxyXG59O1xyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX3Zpc2libGVcIixcclxuICBtb2RhbFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9pbnB1dExpc3QpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIC8vIEdlbmVyYXRlIHRoZSBpZCBmb3IgZXJyb3IgZm9yIHRoZSB0YXJnZXQgZWxlbWVudFxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgLy8gQWRkIHRoZSBpbnB1dCBlcnJvciBjbGFzcyB0byB0aGUgZWxlbWVudCdzIGNsYXNzIGxpc3RcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAvLyBDaGFuZ2UgdGhlIHRleHQgY29udGVudCB0byB0aGUgZXJyb3IgbWVzc2FnZVxyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIC8vIEFkZCB0aGUgZXJyb3IgY2xhc3MgdG8gdGhlIGVycm9yIG1lc3NhZ2UncyBjbGFzcyBsaXN0XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAvLyBHZW5lcmF0ZSB0aGUgaWQgZm9yIGVycm9yIGZvciB0aGUgdGFyZ2V0IGVsZW1lbnRcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGlucHV0IGVycm9yIGNsYXNzIHRvIHRoZSBlbGVtZW50J3MgY2xhc3MgbGlzdFxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuXHJcbiAgICAvLyBDbGVhciB0aGUgZXJyb3IgbWVzc2FnZSBmcm9tIHRoZSB0ZXh0IGNvbnRlbnRcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgZXJyb3IgY2xhc3MgdG8gdGhlIGVycm9yIG1lc3NhZ2UncyBjbGFzcyBsaXN0XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICAvLyBEaXNhYmxlIGZvcm0gYnV0dG9uXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG5cclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyBFbmFibGUgZm9ybSBidXR0b25cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIFNob3cgb3IgaGlkZSBpbnB1dCBlcnJvcnMgYmFzZWQgb24gdGhlIGN1cnJlbnQgaW5wdXQgZWxlbWVudCdzIHZhbGlkaXR5XHJcbiAgX3RvZ2dsZUlucHV0U3RhdGUoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAvLyBJZiBpbnB1dCBlbGVtZW50IGlzIGludmFsaWQsIHNob3cgaW5wdXQgZXJyb3IgbWVzc2FnZVxyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gT3RoZXJ3aXNlLCBoaWRlIGlucHV0IGVycm9yIG1lc3NhZ2VcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENoZWNrIGlmIHRoZSBpbnB1dCBlbGVtZW50IGlzIGludmFsaWRcclxuICBfY2hlY2tWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgaWYgYW55IGVsZW1lbnQgaW4gdGhlIGlucHV0IGxpc3QgaXMgaW52YWxpZFxyXG5cclxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT5cclxuICAgIEFycmF5LmZyb20odGhpcy5faW5wdXRMaXN0KS5zb21lKHRoaXMuX2NoZWNrVmFsaWRpdHkpO1xyXG5cclxuICAvLyBUb2dnbGUgYnV0dG9uIGRlcGVuZGluZyBvbiB0aGUgaW5wdXQncyB2YWxpZGl0eVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB2YWxpZCwgZGlzYWJsZSB0aGUgYnV0dG9uXHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBPdGhlcndpc2UsIGVuYWJsZSB0aGUgYnV0dG9uXHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2V0IGV2ZW50IGxpc3RlbmVycyBmb3IgZm9ybSBlbGVtZW50cyBiYXNlZCBvbiB0aGUgdXNlciBpbnB1dHMnIHZhbGlkaXR5XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gRGlzYWJsZSBidXR0b25cclxuICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG5cclxuICAgIC8vIExpc3RlbiBmb3IgdGhlIFwidHlwZVwiIGV2ZW50IG9uIGVhY2ggaW5wdXRcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRTdGF0ZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBmb3JtXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgLy8gUHJldmVudCB0aGUgZm9ybSdzIGRlZmF1bHQgYmVoYXZpb3VyXHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTZXQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgLy8gUmVzZXQgc3VibWl0IGJ1dHRvblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAvLyBDbGVhciBlcnJvciBtZXNzYWdlc1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7XHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGZvcm1TZXR0aW5ncyxcclxuICBpbml0aWFsQ2FyZHMsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnRhbnRzLmpzXCI7XHJcblxyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b25cIik7XHJcbmNvbnN0IG1vZGFsSW5wdXRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgbW9kYWxJbnB1dFN1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXN1YnRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBhZGRDYXJkQnV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19jYXJkLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJmb3JtQWRkQ2FyZFwiXTtcclxuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGVGb3JtXCJdO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybSBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vIENyZWF0ZSBhIGZvcm0gdmFsaWRhdG9ycyBvYmplY3RcclxuY29uc3QgZm9ybVZhbGlkYXRvciA9IHt9O1xyXG5cclxuLy8gQ3JlYXRlIHZhbGlkYXRvciBpbnN0YW5jZXMgZm9yIGFsbCBmb3Jtc1xyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHZhbGlkYXRpb25TZXR0aW5ncykgPT4ge1xyXG4gIC8vIENyZWF0ZSBhbiBhcnJheSBvZiBhbGwgZm9ybXNcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25TZXR0aW5ncy5tb2RhbFNlbGVjdG9yKVxyXG4gICk7XHJcblxyXG4gIC8vIENyZWF0ZSBhIHZhbGlkYXRvciBmb3IgZWFjaCBmb3JtXHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIC8vIENyZWF0ZSBhIHZhbGlkYXRvciBpbnN0YW5jZSBmb3IgdGhlIGN1cnJlbnQgaW5zdGFuY2VcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gICAgLy8gU3RvcmUgdGhlIGN1cnJlbnQgZm9ybSB2YWxpZGF0b3IgaW4gdGhlIHZhbGlkYXRvcnMgb2JqZWN0XHJcbiAgICBmb3JtVmFsaWRhdG9yW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuXHJcbiAgICAvLyBFbmFibGUgdmFsaWRhdGlvbiBmb3IgdGhlIGN1cnJlbnQgZm9ybVxyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uU2V0dGluZ3MpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcHVwIEltYWdlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuLy8gQ3JlYXRlIGltYWdlIHBvcHVwIGluc3RhbmNlXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoZm9ybVNldHRpbmdzLm1vZGFsSW1hZ2UpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcmQgU2VjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgZGF0YSxcclxuICAgIChpbWFnZURhdGEpID0+IHtcclxuICAgICAgaW1hZ2VQb3B1cC5vcGVuKGltYWdlRGF0YSk7XHJcbiAgICB9LFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbi8vIEluaXRpYWxpemUgY2FyZCBzZWN0aW9uXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgY2FyZFxyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IHJlbmRlckNhcmQoZGF0YSk7XHJcblxyXG4gICAgICAvLyBEaXNwbGF5IGVhY2ggY2FyZFxyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBmb3JtU2V0dGluZ3MuY2FyZExpc3RcclxuKTtcclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGluaXRpYWxDYXJkcyk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGQgQ3JhZCAgRm9ybSAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuLy8gQ3JlYXRlIHRoZSBhZGQgZm9ybSBpbnN0YW5jZVxyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShmb3JtU2V0dGluZ3MubW9kYWxBZGRDYXJkLCAoZGF0YSkgPT4ge1xyXG4gIC8vIENyZWF0ZSBhIG5ldyBjYXJkXHJcbiAgY29uc3QgbmV3Q2FyZCA9IHJlbmRlckNhcmQoZGF0YSk7XHJcbiAgLy8gQ2xvc2UgdGhlIGFkZCBmb3JtXHJcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgLy8gQWRkIHRoZSBuZXcgY2FyZCB0byB0aGUgc2VjdGlvblxyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgZm9ybVZhbGlkYXRvclthZGRDYXJkRm9ybS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpXS5kaXNhYmxlQnV0dG9uKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gb3BlbkNhcmRGb3JtKCkge1xyXG4gIC8vIE9wZW4gdGhlIGFkZCBjYXJkIGZvcm1cclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59XHJcbi8vIE9wZW4gdGhlIG1vZGFsIHdoZW4gdXNlcnMgY2xpY2sgb24gdGhlIGFkZCBidXR0b25cclxuYWRkQ2FyZEJ1dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG9wZW5DYXJkRm9ybSgpO1xyXG59KTtcclxuXHJcbi8vIFNldCBhZGQgZm9ybSBldmVudCBsaXN0ZW5lcnNcclxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9maWxlIEluZm9ybWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4vLyBDcmVhdGUgdGhlIHVzZXIgaW5mbyBpbnN0YW5jZVxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcclxuICBmb3JtU2V0dGluZ3MucHJvZmlsZU5hbWUsXHJcbiAgZm9ybVNldHRpbmdzLnByb2ZpbGVTdWJ0aXRsZVxyXG4pO1xyXG4vLyBDcmVhdGUgdGhlIGVkaXQgZm9ybSBpbnN0YW5jZVxyXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBmb3JtU2V0dGluZ3MubW9kYWxQcm9maWxlLFxyXG4gICh7IG5hbWUsIHN1YnRpdGxlIH0pID0+IHtcclxuICAgIC8vIEFkZCB0aGUgZm9ybSdzIGlucHV0IHRvIHRoZSBwcm9maWxlIHNlY3Rpb25cclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWUsIHN1YnRpdGxlKTtcclxuXHJcbiAgICAvLyBDbG9zZSB0aGUgZWRpdCBmb3JtXHJcbiAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICB9XHJcbik7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFZGl0IEZvcm0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gb3BlbiB0aGUgZWRpdCBtb2RhbCBhbmQgcG9wdWxhdGUgZm9ybSBmaWVsZHMgd2l0aCBwcm9maWxlIGluZm9cclxuZnVuY3Rpb24gb3BlbkVkaXRGb3JtKCkge1xyXG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBtb2RhbElucHV0VGl0bGUudmFsdWUgPSBwcm9maWxlSW5mby5uYW1lO1xyXG4gIG1vZGFsSW5wdXRTdWJ0aXRsZS52YWx1ZSA9IHByb2ZpbGVJbmZvLnN1YnRpdGxlO1xyXG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGRpc2FibGUgYnV0dG9ucyBhbmQgcmVzZXQgdmFsaWRhdGlvblxyXG5mdW5jdGlvbiBwcmVwYXJlRm9ybSgpIHtcclxuICBmb3JtVmFsaWRhdG9yW3Byb2ZpbGVGb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIildO1xyXG4gIGZvcm1WYWxpZGF0b3JbcHJvZmlsZUZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn1cclxuXHJcbi8vIEV2ZW50IGxpc3RlbmVyIGZvciBlZGl0IGJ1dHRvbiBjbGlja1xyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3BlbkVkaXRGb3JtKCk7XHJcbiAgcHJlcGFyZUZvcm0oKTtcclxufSk7XHJcblxyXG4vLyBTZXQgZXZlbnQgbGlzdGVuZXJzIGZvciB0aGUgcHJvZmlsZSBwb3B1cCBtb2RhbFxyXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmV2aWV3X19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmV2aWV3X19jYXB0aW9uXCIpO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIC8vIERlZmluZSBvcGVuSW1hZ2UgYXMgYSByZWd1bGFyIG1ldGhvZFxyXG4gIG9wZW4oaW1hZ2VEYXRhKSB7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gaW1hZ2VEYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBpbWFnZURhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGBpbWFnZSAke2ltYWdlRGF0YS5uYW1lfWA7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBzdWJ0aXRsZVNlbGN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VidGl0bGVTZWxjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgc3VidGl0bGU6IHRoaXMuX3N1YnRpdGxlLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIHN1YnRpdGxlKSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3N1YnRpdGxlLnRleHRDb250ZW50ID0gc3VidGl0bGU7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiaGFuZGxlSW1hZ2VDbGljayIsImNhcmRTZWxlY3RvciIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9saWtlQnV0dG9uIiwicXVlcnlTZWxlY3RvciIsIl9jYXJkSW1hZ2UiLCJfdHJhc2hCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2UiLCJfZGVsZXRlQ2FyZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiYWRkIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZXZlbnQiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfZm9ybUlucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0T2JqZWN0IiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiaW5pdGlhbENhcmRzIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJjb25zb2xlIiwibG9nIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVJbnB1dFN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja1ZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsIkFycmF5IiwiZnJvbSIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwiZWRpdEJ1dHRvbiIsIm1vZGFsSW5wdXRUaXRsZSIsIm1vZGFsSW5wdXRTdWJ0aXRsZSIsImFkZENhcmRCdXQiLCJhZGRDYXJkRm9ybSIsImZvcm1zIiwicHJvZmlsZUZvcm0iLCJmb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvblNldHRpbmdzIiwibW9kYWxTZWxlY3RvciIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsIl9jYXB0aW9uIiwiaW1hZ2VEYXRhIiwicmVuZGVyQ2FyZCIsImRhdGEiLCJjYXJkU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRWxlbWVudCIsImFkZENhcmRQb3B1cCIsIm5ld0NhcmQiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsInN1YnRpdGxlU2VsY3RvciIsIl9zdWJ0aXRsZSIsImdldFVzZXJJbmZvIiwic3VidGl0bGUiLCJzZXRVc2VySW5mbyIsInByb2ZpbGVQb3B1cCIsInByb2ZpbGVJbmZvIiwib3BlbkVkaXRGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==