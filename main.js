!function(){"use strict";class t{constructor(t,e,s){let{name:i,link:r}=t;this._name=i,this._link=r,this._cardSelector=s,this._handleImageClick=e,this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like-button"),this._cardImage=this._element.querySelector(".card__image"),this._trashButton=this._element.querySelector(".card__trash-button"),this._setEventListeners()}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLike),this._trashButton.addEventListener("click",(()=>this._deleteCard())),this._cardImage.addEventListener("click",(()=>this._handleImageClick({link:this._link,name:this._name})))}_handleLike=()=>{this._likeButton.classList.toggle("card__like-button_active")};_deleteCard(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardImage.src=this._link,this._cardImage.alt=`Photo of ${this._name}`,this._element.querySelector(".card__title").textContent=this._name,this._element}}class e{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}class s{constructor(t){let{popupSelector:e}=t;this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(t=>{t.target===t.currentTarget&&this.close()})),this._closeButton.addEventListener("click",(()=>this.close()))}}class i extends s{constructor(t,e){super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._formInputs=this._popupForm.querySelectorAll("input"),this._handleFormSubmit=e}_getInputValues(){const t={};return this._formInputs.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()}))}}class r{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e,this._inputList=this._form.querySelectorAll(this._inputSelector),console.log(this._inputList),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleInputState(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_checkValidity(t){return!t.validity.valid}_hasInvalidInput=()=>Array.from(this._inputList).some(this._checkValidity);_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this.disableButton(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._toggleInputState(t),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}}const n=document.querySelector(".profile__button"),o=document.querySelector("#profile-title-input"),l=document.querySelector("#profile-subtitle-input"),a=document.querySelector(".profile__card-button"),c=document.forms.formAddCard,u=document.forms.profileForm,_=new class{constructor(t){console.log(t.headers),this.baseUrl=t.baseUrl,this.headers=t.headers}getInitialCards(){return fetch(`${this.baseUrl}/cards`,{headers:this.headers}).then((t=>t.ok?t.json():Promise.reject(`Erorr: ${t.status}`)))}}({baseUrl:"https://around.nomoreparties.co/v1/",headers:{authorization:"e30be5ba-ef59-4796-ae62-42d453552a45","Content-Type":"application/json"}});console.log((void 0).headers);const h={};var d;d={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input-error",errorClass:"modal__input-error_visible",modalSelector:".modal__form"},Array.from(document.querySelectorAll(d.modalSelector)).forEach((t=>{const e=new r(d,t),s=t.getAttribute("name");h[s]=e,e.enableValidation()}));const m=new class extends s{constructor(t){super({popupSelector:t}),this._image=this._popupElement.querySelector(".preview__image"),this._caption=this._popupElement.querySelector(".preview__caption"),super.setEventListeners()}open(t){this._caption.textContent=t.name,this._image.src=t.link,this._image.alt=`image ${t.name}`,super.open()}}("#preview_image");function p(e){return new t(e,(t=>{m.open(t)}),"#card-template").getView()}_.getInitialCards().then((t=>{new e({items:t,renderer:p},".cards__list").renderItems()})).catch((t=>{console.error("Error fetching initial cards:",t)}));const v=new i("#modalAddCard",(t=>{const e=p(t);v.close(),cardSection.addItem(e),h[c.getAttribute("name")].disableButton()}));a.addEventListener("click",(()=>{v.open()})),v.setEventListeners();const E=new class{constructor(t,e){this._name=document.querySelector(t),this._subtitle=document.querySelector(e)}getUserInfo(){return{name:this._name.textContent,subtitle:this._subtitle.textContent}}setUserInfo(t,e){this._name.textContent=t,this._subtitle.textContent=e}}(".profile__title",".profile__subtitle"),b=new i("#modalEdit",(t=>{let{name:e,subtitle:s}=t;E.setUserInfo(e,s),b.close()}));n.addEventListener("click",(()=>{!function(){const t=E.getUserInfo();o.value=t.name,l.value=t.subtitle,b.open()}(),function(){const t=h[u.getAttribute("name")];t.resetValidation(),t.disableButton()}()})),b.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RjBIYkUsRUFBZSxJQUFJbEcsRUVqSVQsY0ZtSWQxRCxJQUF3QixJQUF2QixLQUFFRyxFQUFJLFNBQUV1SixHQUFVMUosRUFFakJxSixFQUFTTSxZQUFZeEosRUFBTXVKLEdBRzNCRSxFQUFhMUcsT0FBTyxJQXdCeEIyRCxFQUFXNUYsaUJBQWlCLFNBQVMsTUFmckMsV0FDRSxNQUFNNEksRUFBY1IsRUFBU0ksY0FDN0IzQyxFQUFnQjFDLE1BQVF5RixFQUFZMUosS0FDcEM0RyxFQUFtQjNDLE1BQVF5RixFQUFZSCxTQUN2Q0UsRUFBYTdHLE1BQ2YsQ0FXRStHLEdBUkYsV0FDRSxNQUFNQyxFQUFtQjdCLEVBQWNmLEVBQVlvQixhQUFhLFNBQ2hFd0IsRUFBaUJuRCxrQkFDakJtRCxFQUFpQmhFLGVBQ25CLENBS0VpRSxFQUFrQixJQUlwQkosRUFBYXRHLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL0FQSS9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnRhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBoYW5kbGVJbWFnZUNsaWNrLCBjYXJkU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpOyAvLyBJbml0aWFsaXplIF9lbGVtZW50IG9uY2VcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7IC8vIEluaXRpYWxpemUgX2xpa2VCdXR0b24gb25jZVxyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpOyAvLyBJbml0aWFsaXplIF9jYXJkSW1hZ2Ugb25jZVxyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpOyAvLyBJbml0aWFsaXplIF90cmFzaEJ1dHRvbiBvbmNlXHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gQ2FsbCBfc2V0RXZlbnRMaXN0ZW5lcnMgb25jZVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZSk7XHJcbiAgICB0aGlzLl90cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fZGVsZXRlQ2FyZCgpKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9O1xyXG5cclxuICBfZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGBQaG90byBvZiAke3RoaXMuX25hbWV9YDtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gQ2xvc2UgdGhlIHBvcHVwIHdoZW4gdXNlcnMgY2xpY2sgb24gdGhlIHNoYWRlZCBhcmVhIG91dHNpZGUgdGhlIG1vZGFsXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICAvLyBDb2xsZWN0cyBkYXRhIGZyb20gYWxsIHRoZSBpbnB1dCBmaWVsZHMgYW5kIHJldHVybnMgdGhlIGRhdGEgYXMgYW4gb2JqZWN0XHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgLy8gTWFrZSBhIGlucHV0IGRhdGEgb2JqZWN0XHJcbiAgICBjb25zdCBpbnB1dE9iamVjdCA9IHt9O1xyXG4gICAgLy8gTmFtZSBlYWNoIGlucHV0IGJ5IGl0cyB2YWx1ZVxyXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dE9iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICAvLyBSZXR1cm4gdGhlIGRhdGEgYXMgYW4gb2JqZWN0XHJcbiAgICByZXR1cm4gaW5wdXRPYmplY3Q7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIEFkZCB0aGUgJ2NsaWNrJyBldmVudCBsaXN0ZW5lciB0byB0aGUgY2xvc2UgaWNvblxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlICdzdWJtaXQnIGV2ZW50IGhhbmRsZXIgdG8gdGhlIGZvcm1cclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9pbnB1dExpc3QpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIC8vIEdlbmVyYXRlIHRoZSBpZCBmb3IgZXJyb3IgZm9yIHRoZSB0YXJnZXQgZWxlbWVudFxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgLy8gQWRkIHRoZSBpbnB1dCBlcnJvciBjbGFzcyB0byB0aGUgZWxlbWVudCdzIGNsYXNzIGxpc3RcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAvLyBDaGFuZ2UgdGhlIHRleHQgY29udGVudCB0byB0aGUgZXJyb3IgbWVzc2FnZVxyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIC8vIEFkZCB0aGUgZXJyb3IgY2xhc3MgdG8gdGhlIGVycm9yIG1lc3NhZ2UncyBjbGFzcyBsaXN0XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAvLyBHZW5lcmF0ZSB0aGUgaWQgZm9yIGVycm9yIGZvciB0aGUgdGFyZ2V0IGVsZW1lbnRcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIGlucHV0IGVycm9yIGNsYXNzIHRvIHRoZSBlbGVtZW50J3MgY2xhc3MgbGlzdFxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuXHJcbiAgICAvLyBDbGVhciB0aGUgZXJyb3IgbWVzc2FnZSBmcm9tIHRoZSB0ZXh0IGNvbnRlbnRcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgZXJyb3IgY2xhc3MgdG8gdGhlIGVycm9yIG1lc3NhZ2UncyBjbGFzcyBsaXN0XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICAvLyBEaXNhYmxlIGZvcm0gYnV0dG9uXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG5cclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyBFbmFibGUgZm9ybSBidXR0b25cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIFNob3cgb3IgaGlkZSBpbnB1dCBlcnJvcnMgYmFzZWQgb24gdGhlIGN1cnJlbnQgaW5wdXQgZWxlbWVudCdzIHZhbGlkaXR5XHJcbiAgX3RvZ2dsZUlucHV0U3RhdGUoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAvLyBJZiBpbnB1dCBlbGVtZW50IGlzIGludmFsaWQsIHNob3cgaW5wdXQgZXJyb3IgbWVzc2FnZVxyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gT3RoZXJ3aXNlLCBoaWRlIGlucHV0IGVycm9yIG1lc3NhZ2VcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENoZWNrIGlmIHRoZSBpbnB1dCBlbGVtZW50IGlzIGludmFsaWRcclxuICBfY2hlY2tWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgaWYgYW55IGVsZW1lbnQgaW4gdGhlIGlucHV0IGxpc3QgaXMgaW52YWxpZFxyXG5cclxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT5cclxuICAgIEFycmF5LmZyb20odGhpcy5faW5wdXRMaXN0KS5zb21lKHRoaXMuX2NoZWNrVmFsaWRpdHkpO1xyXG5cclxuICAvLyBUb2dnbGUgYnV0dG9uIGRlcGVuZGluZyBvbiB0aGUgaW5wdXQncyB2YWxpZGl0eVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB2YWxpZCwgZGlzYWJsZSB0aGUgYnV0dG9uXHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBPdGhlcndpc2UsIGVuYWJsZSB0aGUgYnV0dG9uXHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2V0IGV2ZW50IGxpc3RlbmVycyBmb3IgZm9ybSBlbGVtZW50cyBiYXNlZCBvbiB0aGUgdXNlciBpbnB1dHMnIHZhbGlkaXR5XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gRGlzYWJsZSBidXR0b25cclxuICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG5cclxuICAgIC8vIExpc3RlbiBmb3IgdGhlIFwidHlwZVwiIGV2ZW50IG9uIGVhY2ggaW5wdXRcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRTdGF0ZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBWYWxpZGF0ZSBmb3JtXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgLy8gUHJldmVudCB0aGUgZm9ybSdzIGRlZmF1bHQgYmVoYXZpb3VyXHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTZXQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgLy8gUmVzZXQgc3VibWl0IGJ1dHRvblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAvLyBDbGVhciBlcnJvciBtZXNzYWdlc1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBBcGkgZnJvbSBcIi4uL0FQSS9BcGkuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgdmFsaWRhdGlvblNldHRpbmdzLCBmb3JtU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29udGFudHMuanNcIjtcclxuXHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuXHJcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvblwiKTtcclxuY29uc3QgbW9kYWxJbnB1dFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBtb2RhbElucHV0U3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtc3VidGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IGFkZENhcmRCdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2NhcmQtYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImZvcm1BZGRDYXJkXCJdO1xyXG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZUZvcm1cIl07XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJlMzBiZTViYS1lZjU5LTQ3OTYtYWU2Mi00MmQ0NTM1NTJhNDVcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5jb25zb2xlLmxvZyh0aGlzLmhlYWRlcnMpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybSBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vIENyZWF0ZSBhIGZvcm0gdmFsaWRhdG9ycyBvYmplY3RcclxuY29uc3QgZm9ybVZhbGlkYXRvciA9IHt9O1xyXG5cclxuLy8gQ3JlYXRlIHZhbGlkYXRvciBpbnN0YW5jZXMgZm9yIGFsbCBmb3Jtc1xyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHZhbGlkYXRpb25TZXR0aW5ncykgPT4ge1xyXG4gIC8vIENyZWF0ZSBhbiBhcnJheSBvZiBhbGwgZm9ybXNcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25TZXR0aW5ncy5tb2RhbFNlbGVjdG9yKVxyXG4gICk7XHJcblxyXG4gIC8vIENyZWF0ZSBhIHZhbGlkYXRvciBmb3IgZWFjaCBmb3JtXHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIC8vIENyZWF0ZSBhIHZhbGlkYXRvciBpbnN0YW5jZSBmb3IgdGhlIGN1cnJlbnQgaW5zdGFuY2VcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gICAgLy8gU3RvcmUgdGhlIGN1cnJlbnQgZm9ybSB2YWxpZGF0b3IgaW4gdGhlIHZhbGlkYXRvcnMgb2JqZWN0XHJcbiAgICBmb3JtVmFsaWRhdG9yW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuXHJcbiAgICAvLyBFbmFibGUgdmFsaWRhdGlvbiBmb3IgdGhlIGN1cnJlbnQgZm9ybVxyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uU2V0dGluZ3MpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcHVwIEltYWdlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuLy8gQ3JlYXRlIGltYWdlIHBvcHVwIGluc3RhbmNlXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoZm9ybVNldHRpbmdzLm1vZGFsSW1hZ2UpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcmQgU2VjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgZGF0YSxcclxuICAgIChpbWFnZURhdGEpID0+IHtcclxuICAgICAgaW1hZ2VQb3B1cC5vcGVuKGltYWdlRGF0YSk7XHJcbiAgICB9LFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbi8vIEluaXRpYWxpemUgY2FyZCBzZWN0aW9uXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcclxuICAgICAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICAgICAgfSxcclxuICAgICAgZm9ybVNldHRpbmdzLmNhcmRMaXN0XHJcbiAgICApO1xyXG5cclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGluaXRpYWwgY2FyZHM6XCIsIGVycik7XHJcbiAgfSk7XHJcbi8vIGZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuLy8gICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmREYXRhO1xyXG4vLyAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4vLyB9XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZCBDcmFkICBGb3JtICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4vLyBDcmVhdGUgdGhlIGFkZCBmb3JtIGluc3RhbmNlXHJcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGZvcm1TZXR0aW5ncy5tb2RhbEFkZENhcmQsIChkYXRhKSA9PiB7XHJcbiAgLy8gQ3JlYXRlIGEgbmV3IGNhcmRcclxuICBjb25zdCBuZXdDYXJkID0gcmVuZGVyQ2FyZChkYXRhKTtcclxuICAvLyBDbG9zZSB0aGUgYWRkIGZvcm1cclxuICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAvLyBBZGQgdGhlIG5ldyBjYXJkIHRvIHRoZSBzZWN0aW9uXHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcclxuICBmb3JtVmFsaWRhdG9yW2FkZENhcmRGb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIildLmRpc2FibGVCdXR0b24oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBvcGVuQ2FyZEZvcm0oKSB7XHJcbiAgLy8gT3BlbiB0aGUgYWRkIGNhcmQgZm9ybVxyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbn1cclxuLy8gT3BlbiB0aGUgbW9kYWwgd2hlbiB1c2VycyBjbGljayBvbiB0aGUgYWRkIGJ1dHRvblxyXG5hZGRDYXJkQnV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3BlbkNhcmRGb3JtKCk7XHJcbn0pO1xyXG5cclxuLy8gU2V0IGFkZCBmb3JtIGV2ZW50IGxpc3RlbmVyc1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb2ZpbGUgSW5mb3JtYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vIENyZWF0ZSB0aGUgdXNlciBpbmZvIGluc3RhbmNlXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxyXG4gIGZvcm1TZXR0aW5ncy5wcm9maWxlTmFtZSxcclxuICBmb3JtU2V0dGluZ3MucHJvZmlsZVN1YnRpdGxlXHJcbik7XHJcbi8vIENyZWF0ZSB0aGUgZWRpdCBmb3JtIGluc3RhbmNlXHJcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIGZvcm1TZXR0aW5ncy5tb2RhbFByb2ZpbGUsXHJcbiAgKHsgbmFtZSwgc3VidGl0bGUgfSkgPT4ge1xyXG4gICAgLy8gQWRkIHRoZSBmb3JtJ3MgaW5wdXQgdG8gdGhlIHByb2ZpbGUgc2VjdGlvblxyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgc3VidGl0bGUpO1xyXG5cclxuICAgIC8vIENsb3NlIHRoZSBlZGl0IGZvcm1cclxuICAgIHByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG4gIH1cclxuKTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXQgRm9ybSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4vLyBGdW5jdGlvbiB0byBvcGVuIHRoZSBlZGl0IG1vZGFsIGFuZCBwb3B1bGF0ZSBmb3JtIGZpZWxkcyB3aXRoIHByb2ZpbGUgaW5mb1xyXG5mdW5jdGlvbiBvcGVuRWRpdEZvcm0oKSB7XHJcbiAgY29uc3QgcHJvZmlsZUluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG1vZGFsSW5wdXRUaXRsZS52YWx1ZSA9IHByb2ZpbGVJbmZvLm5hbWU7XHJcbiAgbW9kYWxJbnB1dFN1YnRpdGxlLnZhbHVlID0gcHJvZmlsZUluZm8uc3VidGl0bGU7XHJcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdG8gZGlzYWJsZSBidXR0b25zIGFuZCByZXNldCB2YWxpZGF0aW9uXHJcbmZ1bmN0aW9uIHJlc2V0UHJvZmlsZUZvcm0oKSB7XHJcbiAgY29uc3QgcHJvZmlsZVZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3JbcHJvZmlsZUZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV07XHJcbiAgcHJvZmlsZVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBwcm9maWxlVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxufVxyXG5cclxuLy8gRXZlbnQgbGlzdGVuZXIgZm9yIGVkaXQgYnV0dG9uIGNsaWNrXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBvcGVuRWRpdEZvcm0oKTtcclxuICByZXNldFByb2ZpbGVGb3JtKCk7XHJcbn0pO1xyXG5cclxuLy8gU2V0IGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIHByb2ZpbGUgcG9wdXAgbW9kYWxcclxucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgY29uc29sZS5sb2cob3B0aW9ucy5oZWFkZXJzKTtcclxuICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJvcnI6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgZm9ybVNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICBtb2RhbEFkZENhcmQ6IFwiI21vZGFsQWRkQ2FyZFwiLFxyXG4gIG1vZGFsUHJvZmlsZTogXCIjbW9kYWxFZGl0XCIsXHJcbiAgcHJvZmlsZUZvcm06IFwiI2VkaXRfX3Byb2ZpbGVfX2Zvcm1cIixcclxuICBtb2RhbEltYWdlOiBcIiNwcmV2aWV3X2ltYWdlXCIsXHJcbiAgaW1hZ2VNb2RhbENvbnRhaW5lcjogXCIucHJldmlld19fY29udGFpbmVyXCIsXHJcbiAgaW1hZ2VzOiBcIi5jYXJkXCIsXHJcbiAgY2FyZExpc3Q6IFwiLmNhcmRzX19saXN0XCIsXHJcbiAgcHJvZmlsZU5hbWU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgcHJvZmlsZVN1YnRpdGxlOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxyXG59O1xyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX3Zpc2libGVcIixcclxuICBtb2RhbFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnByZXZpZXdfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnByZXZpZXdfX2NhcHRpb25cIik7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgLy8gRGVmaW5lIG9wZW5JbWFnZSBhcyBhIHJlZ3VsYXIgbWV0aG9kXHJcbiAgb3BlbihpbWFnZURhdGEpIHtcclxuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBpbWFnZURhdGEubmFtZTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGltYWdlRGF0YS5saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYGltYWdlICR7aW1hZ2VEYXRhLm5hbWV9YDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgc3VidGl0bGVTZWxjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN1YnRpdGxlU2VsY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIHN1YnRpdGxlOiB0aGlzLl9zdWJ0aXRsZS50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBzdWJ0aXRsZSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9zdWJ0aXRsZS50ZXh0Q29udGVudCA9IHN1YnRpdGxlO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImhhbmRsZUltYWdlQ2xpY2siLCJjYXJkU2VsZWN0b3IiLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfbGlrZUJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJfY2FyZEltYWdlIiwiX3RyYXNoQnV0dG9uIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlIiwiX2RlbGV0ZUNhcmQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiZm9yRWFjaCIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwib3BlbiIsImFkZCIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImV2ZW50IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2Zvcm1JbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dE9iamVjdCIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJjb25zb2xlIiwibG9nIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVJbnB1dFN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja1ZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsIkFycmF5IiwiZnJvbSIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwiZWRpdEJ1dHRvbiIsIm1vZGFsSW5wdXRUaXRsZSIsIm1vZGFsSW5wdXRTdWJ0aXRsZSIsImFkZENhcmRCdXQiLCJhZGRDYXJkRm9ybSIsImZvcm1zIiwicHJvZmlsZUZvcm0iLCJhcGkiLCJvcHRpb25zIiwiaGVhZGVycyIsImJhc2VVcmwiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYXV0aG9yaXphdGlvbiIsImZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJtb2RhbFNlbGVjdG9yIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJpbWFnZVBvcHVwIiwiX2ltYWdlIiwiX2NhcHRpb24iLCJpbWFnZURhdGEiLCJyZW5kZXJDYXJkIiwiZGF0YSIsImNhcmRzIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImFkZENhcmRQb3B1cCIsIm5ld0NhcmQiLCJjYXJkU2VjdGlvbiIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwic3VidGl0bGVTZWxjdG9yIiwiX3N1YnRpdGxlIiwiZ2V0VXNlckluZm8iLCJzdWJ0aXRsZSIsInNldFVzZXJJbmZvIiwicHJvZmlsZVBvcHVwIiwicHJvZmlsZUluZm8iLCJvcGVuRWRpdEZvcm0iLCJwcm9maWxlVmFsaWRhdG9yIiwicmVzZXRQcm9maWxlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=